(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{572:function(t,s,n){"use strict";n.r(s);var a=n(3),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"},[t._v("介绍")]),n("p",[t._v("nodejs核心模块 http模块 ---初探"),n("br")])]),t._v(" "),n("h1",{attrs:{id:"nodejs核心模块-http模块-初探"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nodejs核心模块-http模块-初探"}},[t._v("#")]),t._v(" nodejs核心模块 http模块 ---初探")]),t._v(" "),n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),n("p",[n("code",[t._v("http")]),t._v("是"),n("code",[t._v("nodejs")]),t._v("的核心模块，它能让我们能够通过简单的代码"),n("strong",[t._v("创建一个Web服务器")]),t._v("，处理http请求。")]),t._v(" "),n("h2",{attrs:{id:"用http-模块写一个简单的web服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#用http-模块写一个简单的web服务器"}},[t._v("#")]),t._v(" 用http 模块写一个简单的web服务器")]),t._v(" "),n("h3",{attrs:{id:"_1-要点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-要点"}},[t._v("#")]),t._v(" 1.要点")]),t._v(" "),n("p",[n("strong",[t._v("引入模块 创建服务 开启服务")])]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("引入")]),t._v("http核心模块")]),t._v(" "),n("li",[t._v("使用createServer来"),n("strong",[t._v("创建")]),t._v("服务")]),t._v(" "),n("li",[t._v("使用listener来"),n("strong",[t._v("启动")]),t._v("服务")])]),t._v(" "),n("h3",{attrs:{id:"_2-操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-操作"}},[t._v("#")]),t._v(" 2.操作")]),t._v(" "),n("p",[n("strong",[t._v("第一步")]),t._v("：新建一个文件，名为  "),n("code",[t._v("d:/src/http.js")]),t._v("( 文件名及路径名可以自行设置，建议均不使用中文字符)\n"),n("strong",[t._v("第二步")]),t._v("：书写代码， 内容如下")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 引入http模块")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 创建服务")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'有人来访问了'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向客户端发送内容，并结束本次响应")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 启动服务")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务器开启 端口3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[n("strong",[t._v("第三步")]),t._v("：运行js代码。")]),t._v(" "),n("p",[t._v("在小黑窗中进入到d盘根目录下的src文件夹，键入命令 "),n("code",[t._v("node http.js")]),t._v("，此时会弹出一个小黑窗，"),n("strong",[t._v("不要关")]),t._v("。")]),t._v(" "),n("p",[n("strong",[t._v("第四步")]),t._v("：本地验收")]),t._v(" "),n("p",[t._v("打开一个浏览器页面，输入"),n("code",[t._v("http://localhost:3000")]),t._v("，观察效果：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("浏览器中的效果\n"),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210322205819131.png",alt:"在这里插入图片描述"}})])]),t._v(" "),n("li",[n("p",[t._v("小黑窗中的效果"),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210322205729579.png",alt:"在这里插入图片描述"}})])])]),t._v(" "),n("p",[n("strong",[t._v("第五步")]),t._v("：共享地址")]),t._v(" "),n("p",[t._v("把localhost改成自己电脑的ip地址，再把这个路径别人（同一个局域网）来访问。")]),t._v(" "),n("p",[n("strong",[t._v("第六步")]),t._v("：停止服务")]),t._v(" "),n("p",[n("code",[t._v("ctrl + c")])]),t._v(" "),n("p",[t._v("如果不能访问，有可能需要手动关闭自己计算机的防火墙。")]),t._v(" "),n("h3",{attrs:{id:"_3-工作原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-工作原理"}},[t._v("#")]),t._v(" 3.工作原理")]),t._v(" "),n("p",[t._v("使用http模块在本机上"),n("strong",[t._v("创建一个虚拟服务器")]),t._v("，它来"),n("strong",[t._v("接收浏览器的请求")]),t._v("，并"),n("strong",[t._v("给出响应")]),t._v("。\n"),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210322210017955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMTU3NjEy,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),n("p",[n("strong",[t._v("注意：")])]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("小黑窗不要关，它就是服务器")]),t._v("，它不会有主动行为（看起来没有任何变化），它在时刻等待客户端的访问。")])]),t._v(" "),n("p",[n("strong",[t._v("代码解析")]),t._v(" "),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210322210112549.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMTU3NjEy,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),n("ul",[n("li",[t._v("引入核心模块，得到的"),n("code",[t._v("http")]),t._v("是一个对象。")]),t._v(" "),n("li",[n("code",[t._v("http.createServer")]),t._v("方法创建一个http服务。参数是一个回调函数：当有"),n("code",[t._v("http")]),t._v("请求进来时，它会自动被调用。"),n("strong",[t._v("请求一次，它就被调用一次")]),t._v("。\n"),n("ul",[n("li",[t._v("第一个参数:客户端的请求。")]),t._v(" "),n("li",[t._v("第二个参数:设置对本次请求的响应。\n"),n("ul",[n("li",[n("strong",[t._v("res.end() :设置响应体，结束请求。")])])])])])]),t._v(" "),n("li",[n("code",[t._v("server.listen()")]),t._v(" 用来监听端口。\n"),n("ul",[n("li",[t._v("格式："),n("code",[t._v("server.listen(端口号，[回调函数])")]),t._v("。回调是可选的。")]),t._v(" "),n("li",[t._v("说明：\n"),n("ul",[n("li",[t._v("如果监听成功，则回调函数会执行一次。")]),t._v(" "),n("li",[t._v("如果不成功（例如端口被占用），会报错。")])])])])])]),t._v(" "),n("p",[n("strong",[t._v("修改代码后要重启")])]),t._v(" "),n("p",[t._v("更改res.end()的内容，重启后，再次观察。")]),t._v(" "),n("ul",[n("li",[t._v("停止服务： 在小黑窗中按下ctrl+c 停止服务。")]),t._v(" "),n("li",[t._v("重启服务：就是重新运行程序（按下向上的箭头，再回车）。")])]),t._v(" "),n("p",[t._v("修改了服务器的代码要重启。")]),t._v(" "),n("h3",{attrs:{id:"_4-理解请求和响应"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-理解请求和响应"}},[t._v("#")]),t._v(" 4.理解请求和响应")]),t._v(" "),n("p",[n("strong",[t._v("4.1请求")])]),t._v(" "),n("p",[t._v("当web服务器就绪之后，如果没有客户端来访问它，它也是不会有任何效果的。也就是说回调函数不会执行。")]),t._v(" "),n("p",[t._v("而"),n("strong",[t._v("每一次的请求，都会导致回调函数要执行一次。")])]),t._v(" "),n("p",[n("strong",[t._v("4.2服务器的响应内容格式")])]),t._v(" "),n("p",[n("code",[t._v("res.end()")]),t._v("的格式只是能是"),n("code",[t._v("buffer")]),t._v("或者是"),n("code",[t._v("String")])])])}),[],!1,null,null,null);s.default=r.exports}}]);