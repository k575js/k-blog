(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{595:function(s,t,a){"use strict";a.r(t);var e=a(3),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("介绍")]),a("p",[s._v("require的加载机制"),a("br")])]),s._v(" "),a("h1",{attrs:{id:"require的加载机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require的加载机制"}},[s._v("#")]),s._v(" require的加载机制")]),s._v(" "),a("h2",{attrs:{id:"效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#效果"}},[s._v("#")]),s._v(" 效果")]),s._v(" "),a("p",[s._v("在我们使用一个模块时，我们会使用require命令来加载这个模块。以加载一个自定义模块为例，require(文件名)的效果是：")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("执行")]),s._v("这个文件中的代码(会把代码执行一遍)")]),s._v(" "),a("li",[s._v("把这个文件中的"),a("code",[s._v("module.exports")]),s._v("对象中的内容返回出来。")])]),s._v(" "),a("p",[s._v("以如下代码为例：")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// moudule1.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tdata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" c\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("在index.js中使用模块")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./moudule1.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这里的obj对象就是moudule1.js中的module.exports对象")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"require加载规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require加载规则"}},[s._v("#")]),s._v(" require加载规则：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("require")]),s._v("优先加载缓存中的模块。同一个模块第一次"),a("code",[s._v("require")]),s._v("之后，就会缓存一份，下一次"),a("code",[s._v("require")]),s._v("时就直接从缓存中去取。")]),s._v(" "),a("li",[s._v("如果是加载核心模块，直接从内存中加载，并缓存\n"),a("ul",[a("li",[s._v("加载核心模块的格式是"),a("code",[s._v('const xxx = require("模块名")')]),s._v(" 。不能写相对路径！")])])]),s._v(" "),a("li",[s._v("如果是相对路径，则根据路径加载自定义模块，并缓存\n"),a("ul",[a("li",[s._v("以"),a("code",[s._v("require('./main')")]),s._v("为例（ "),a("strong",[s._v("省略扩展名")]),s._v("的情况）")]),s._v(" "),a("li",[s._v("先加载"),a("code",[s._v("main.js")]),s._v("，如果没有再加载"),a("code",[s._v("main.json")]),s._v("，如果没有再加载 "),a("code",[s._v("main.node(c/c++编写的模块)")]),s._v("，找不到就报错。")])])]),s._v(" "),a("li",[s._v("如果不是自定义模块，也不是核心模块，则加载第三方模块\n以"),a("code",[s._v("require('XXX')")]),s._v("为例：\n"),a("ul",[a("li",[s._v("node 会去本级 "),a("strong",[s._v("node_modules")]),s._v(" 目录中找"),a("code",[s._v("xxx.js")]),s._v("----\x3e"),a("code",[s._v("xxx.json")]),s._v(" ----\x3e "),a("code",[s._v("xxx.node(找到一个即返回)")]),s._v("，找到并缓存。")]),s._v(" "),a("li",[s._v("如果找不到，node 则取上一级目录下找"),a("strong",[s._v("node_modules/xxx")]),s._v(" 目录，规则同上")]),s._v(" "),a("li",[s._v("如果一直找到代码文件的文件系统的根目录还找不到，则报错：模块没有找到。")])])])]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("module.paths")]),s._v("命令中可以看到搜索路径中包含"),a("strong",[s._v("node_modules")]),s._v("这个文件夹")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("xxx.js")]),s._v("中输出"),a("code",[s._v("module.paths")]),s._v("可以查看")]),s._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmjs.cn/getting-started/what-is-npm/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考https://www.npmjs.cn/getting-started/what-is-npm/"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);